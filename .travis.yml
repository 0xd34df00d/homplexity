
sudo: false
git:
  submodules: false
cache:
  directories:
  - "$HOME/.cabal/packages"
  - "$HOME/.cabal/store"
  - vendor/bundle
  - ".stack-work"
before_cache:
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/build-reports.log
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/00-index.*
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/*.json
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/01-index.cache
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/01-index.tar
- rm -fv $HOME/.cabal/packages/hackage.haskell.org/01-index.tar.idx
- rm -rfv $HOME/.cabal/packages/head.hackage
language: haskell
ghc:
  - 8.6.2
  - 8.4.4
  - 8.2.2
  - 8.0.2
  - 7.8.4
  - head

deploy:
  - provider: hackage
    username: MichalGajda
    password:
      secure: OMW1v4MU5O6xZz0w8tzetjFtx1Ng1mQb4NNKI/BfBlaQtDIBT89FSX3rpdUoe+8rEDmOJcDa5/mnbPGon4L4GeFIu0RTKKJSG0ZAx0P7ngxWQoZGrjZqP6YhLPHsmXGouiy85Kf/AHTAvw2r1Tqk0gEe5zdcxnwDXo3CyuEIL+0=
    on:
      repo: mgajda/homplexity
      tags: true
  - provider: releases
    api_key:
      secure: iFBLl85gDvjrrlYXSGI1x9RB4J5GjmTEv3NDjtx19HHdine7QBhoyxFxjVXwKNsJ7w7dWLgzd0KIvOJgTm9ts9GLEkal3JepzhXVpPLus0GoDnHLKjP+Z1yHTyxcqx9uhzi5Pp7WeqFASDyEon2o6l21ICcaZacvqx9PzHB3HoQ=
    file: $TRAVIS_BUILD_DIR/static/homplexity
    on:
      repo: mgajda/homplexity
      tags: true

